#!/usr/bin/env node
/**
 * Write a plain list of chord and scale names from the TuxGuitar-style library.
 * Run from project root: node frontend/scripts/generate-library-names.js
 * Reads chords.json and scales.json; writes frontend/src/components/guitarTabs/library-names.txt
 */

import { readFileSync, writeFileSync } from 'fs';
import { dirname, join } from 'path';
import { fileURLToPath } from 'url';

const __dirname = dirname(fileURLToPath(import.meta.url));
const GUITAR_TABS = join(__dirname, '../src/components/guitarTabs');
const CHORDS_PATH = join(GUITAR_TABS, 'chords.json');
const SCALES_PATH = join(GUITAR_TABS, 'scales.json');
const OUT_PATH = join(GUITAR_TABS, 'library-names.txt');

const chordsData = JSON.parse(readFileSync(CHORDS_PATH, 'utf8'));
const scalesData = JSON.parse(readFileSync(SCALES_PATH, 'utf8'));

const chordNames = Object.keys(chordsData.chords || {})
  .map((key) => chordsData.displayNames?.[key] ?? key)
  .filter(Boolean)
  .sort((a, b) => a.localeCompare(b, undefined, { sensitivity: 'base' }));

const scaleNames = [...(Object.values(scalesData.displayNames || {}) || [])].sort((a, b) =>
  a.localeCompare(b, undefined, { sensitivity: 'base' })
);

const lines = [
  '# TuxGuitar-style library: chord and scale names (names only)',
  '# Generated by: node frontend/scripts/generate-library-names.js',
  '',
  '## Chords',
  ...chordNames,
  '',
  '## Scales',
  ...scaleNames,
  '',
];

writeFileSync(OUT_PATH, lines.join('\n'), 'utf8');
console.log('Wrote', OUT_PATH, `(${chordNames.length} chords, ${scaleNames.length} scales)`);
